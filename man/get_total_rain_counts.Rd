% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build_definitions_helper_functions.R
\name{get_total_rain_counts}
\alias{get_total_rain_counts}
\title{Extract Annual and Seasonal Rainfall Definitions}
\usage{
get_total_rain_counts(
  data_by_year = NULL,
  annual_total_rain_col = NULL,
  seasonal_total_rain_col = NULL,
  annual_rainday_col = NULL,
  seasonal_rainday_col = NULL,
  definitions_in_raw = NULL,
  rain_days_name = NULL
)
}
\arguments{
\item{data_by_year}{A named list of summary definitions, typically returned by
\code{\link[=get_r_instat_definitions]{get_r_instat_definitions()}}, for the annual dataset.}

\item{annual_total_rain_col}{(Optional) Column name for total annual rainfall.}

\item{seasonal_total_rain_col}{(Optional) Column name for total seasonal rainfall.}

\item{annual_rainday_col}{(Optional) Column name for the annual rain-day count.}

\item{seasonal_rainday_col}{(Optional) Column name for the seasonal rain-day count.}

\item{definitions_in_raw}{(Optional) Raw metadata definitions (from unaggregated data),
used to extract the rain-day threshold.}

\item{rain_days_name}{(Optional) Name of the indicator in the raw metadata (e.g., \code{"count"})
used to define a rain-day threshold.}
}
\value{
A named list with two elements:
\describe{
\item{annual_rain}{List of summary parameters for annual rainfall totals and rain-day counts.}
\item{seasonal_rain}{List of summary parameters for seasonal rainfall totals and rain-day counts.}
}
Each of these lists may include:
\itemize{
\item \code{total_rain} – indicator for total rainfall.
\item \code{n_rain} – indicator for number of rain days.
\item \code{rain_day} – rain-day threshold definition.
\item \code{na_rm}, \code{na_n}, \code{na_n_non}, \code{na_consec}, \code{na_prop} – metadata about missing-value handling.
}
If a definition cannot be found or is ambiguous, the corresponding values will be set to \code{NA}.
}
\description{
This function retrieves metadata definitions for total rainfall and the number of rainy days,
separately for annual and seasonal periods. It searches the supplied summary definitions for
rainfall-related indicators, using naming conventions and filter criteria to distinguish
annual from seasonal data. Optionally, it also extracts the rain-day threshold (e.g., \verb{>= 1 mm})
from raw metadata.
}
\details{
The function attempts to match rainfall indicators using the column names provided
(e.g., \code{"sum_rain"}, \code{"count_rain"}).
Heuristics are then applied to decide if a match refers to annual or seasonal data:
\itemize{
\item Definitions filtered by variables like \code{start_rain} and \code{end_} are considered seasonal.
\item Definitions without such filters are assumed to be annual.
}
If \code{definitions_in_raw} and \code{rain_days_name} are provided, the function calls
\code{\link[=get_rain_counts]{get_rain_counts()}} on the raw metadata to retrieve the rain-day threshold.
}
