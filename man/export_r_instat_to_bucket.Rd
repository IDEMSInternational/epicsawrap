% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/export_r_instat_to_bucket.R
\name{export_r_instat_to_bucket}
\alias{export_r_instat_to_bucket}
\title{Export R-Instat Data and Definitions to Google Cloud Storage Bucket}
\usage{
export_r_instat_to_bucket(
  data = NULL,
  data_by_year,
  data_by_year_month = NULL,
  crop_data_name = NULL,
  rain = NULL,
  station = NULL,
  year = NULL,
  month = NULL,
  summaries = c("annual_rainfall", "annual_temperature", "monthly_temperature",
    "crop_success", "start_season"),
  station_id = NULL,
  definitions_id,
  country,
  include_summary_data = FALSE,
  annual_rainfall_data = NULL,
  annual_temperature_data = NULL,
  monthly_temperature_data = NULL,
  crop_success_data = NULL,
  season_start_data = NULL,
  start_rains_column = "start_rains_doy",
  start_rains_status_column = "start_rain_status",
  end_rains_column = "end_rains_doy",
  end_rains_status_column = "end_rains_status",
  end_season_column = "end_season_doy",
  end_season_status_column = "end_season_status",
  seasonal_length_column = "season_length",
  rain_days_name = NULL,
  extreme_rainfall_column = NULL,
  annual_total_rain_col = NULL,
  seasonal_total_rain_col = NULL,
  annual_rainday_col = NULL,
  seasonal_rainday_col = NULL,
  min_tmin_column = "min_tmin",
  mean_tmin_column = "mean_tmin",
  max_tmin_column = "max_tmin",
  min_tmax_column = "min_tmax",
  mean_tmax_column = "mean_tmax",
  max_tmax_column = "max_tmax"
)
}
\arguments{
\item{data}{The original data frame (Optional. Only required for definitions in calculations for number of rainy days and extremes. Default \code{NULL}).}

\item{data_by_year}{The name of the dataset grouped by year. Required for definitions and rainfall/temperature summaries.}

\item{data_by_year_month}{The name of the dataset grouped by year and month (optional). Required for monthly temperature summaries.}

\item{crop_data_name}{The name of the crop data used for crop success and season start probabilities.}

\item{rain}{The name of the rainfall column.}

\item{station}{The name of the station column used to split and export data.}

\item{year}{The name of the year column.}

\item{month}{The name of the month column.}

\item{summaries}{A character vector of summaries to include. Options: \code{"annual_rainfall"}, \code{"annual_temperature"}, \code{"monthly_temperature"}, \code{"crop_success"}, \code{"start_season"}.}

\item{station_id}{Character vector of station IDs to process.}

\item{definitions_id}{A string identifying the definition version (used for filename and metadata tracking).}

\item{country}{The ISO country code (e.g., \code{"GH"} for Ghana).}

\item{include_summary_data}{Logical; if \code{TRUE}, also uploads summary data in addition to definitions.}

\item{annual_rainfall_data}{Data frame of annual rainfall summary data.}

\item{annual_temperature_data}{Data frame of annual temperature summary data.}

\item{monthly_temperature_data}{Data frame of monthly temperature summary data.}

\item{crop_success_data}{Data frame of crop success proportions (usually called \code{crop_prop} in R-Instat).}

\item{season_start_data}{Data frame used for season start probabilities (usually \code{crop_def}).}

\item{start_rains_column}{Column name for start of rains (DOY).}

\item{start_rains_status_column}{Column name indicating success status for start of rains.}

\item{end_rains_column}{Column name for end of rains (DOY).}

\item{end_rains_status_column}{Column name indicating success status for end of rains.}

\item{end_season_column}{Column name for end of season (DOY).}

\item{end_season_status_column}{Column name indicating success status for end of season.}

\item{seasonal_length_column}{Column name indicating seasonal length (in days).}

\item{rain_days_name}{Column name used to define a rain day threshold (optional).}

\item{extreme_rainfall_column}{Column name used to define an extreme rainfall threshold (optional).}

\item{annual_total_rain_col}{Column name used for annual total rainfall values (optional).}

\item{seasonal_total_rain_col}{Column name for seasonal total rainfall values (optional).}

\item{annual_rainday_col}{Column name for annual rain day count (optional).}

\item{seasonal_rainday_col}{Column name for seasonal rain day count (optional).}

\item{min_tmin_column}{Column name for minimum of minimum temperatures.}

\item{mean_tmin_column}{Column name for mean of minimum temperatures.}

\item{max_tmin_column}{Column name for maximum of minimum temperatures.}

\item{min_tmax_column}{Column name for minimum of maximum temperatures.}

\item{mean_tmax_column}{Column name for mean of maximum temperatures.}

\item{max_tmax_column}{Column name for maximum of maximum temperatures.}
}
\value{
A string message confirming that the definitions and summaries (if included) were uploaded to the cloud storage bucket.
}
\description{
This function collates R-Instat climatic definitions and (optionally) summary data,
saves the result as a JSON file, and uploads it to a specified Google Cloud Storage bucket.
It supports multiple summary types such as rainfall, temperature, crop success, and season start probabilities.
}
\details{
This function:
\enumerate{
\item Collates all relevant climatic definition metadata using \code{collate_definitions_data()}.
\item Uploads definitions to the bucket using \code{add_definitions_to_bucket()}.
\item Updates metadata to record the new definition ID for each station.
\item (Optionally) uploads associated summary datasets per station (if \code{include_summary_data = TRUE}).
}
The upload timestamp is included in all files to ensure version tracking. Each summary is saved per station.
}
\examples{
\dontrun{
export_r_instat_to_bucket(
  data_by_year = "ghana_by_station_year",
  crop_data_name = "crop_def",
  rain = "rain", station = "station", year = "year", month = "month",
  summaries = c("annual_rainfall", "crop_success"),
  country = "GH", definitions_id = "def_202506", station_id = c("ST01", "ST02"),
  include_summary_data = TRUE,
  annual_rainfall_data = ghana_rainfall_summaries,
  crop_success_data = crop_prop,
  season_start_data = crop_def
)
}
}
